<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>管理員輸入測資</title>
</head>
<body>

<h1>輸入參與者資料</h1>

<p>Code: <input type="text" id="code"></p>
<p>Owner Name: <input type="text" id="ownerName"></p>
<p>Info: <input type="text" id="info"></p>

<button id="submitBtn">送出</button>
<p id="msg"></p>

<p><a href="index.html">回到抽籤頁面</a></p>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyALq77Yraym29l8OX2YCLBIBcBve4jo8Dc",
  authDomain: "christmas-draw-c07d6.firebaseapp.com",
  projectId: "christmas-draw-c07d6",
  storageBucket: "christmas-draw-c07d6.firebasestorage.app",
  messagingSenderId: "150938406696",
  appId: "1:150938406696:web:ea9733014831f50029ca1d"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

document.getElementById("submitBtn").onclick = async () => {
  const code = codeInput.value.trim();
  const ownerName = ownerNameInput.value.trim();
  const info = infoInput.value.trim();

  if (!code || !ownerName || !info) {
    msg.textContent = "請填寫所有欄位";
    return;
  }

  try {
    await addDoc(collection(db, "participants"), {
      code,
      ownerName,
      info,
      drawn: false,
      hasDrawn: false   // ✅ 關鍵
    });

    msg.textContent = "新增成功！";
    codeInput.value = ownerNameInput.value = infoInput.value = "";
  } catch (e) {
    console.error(e);
    msg.textContent = "發生錯誤";
  }
};
</script>
</body>
</html>
