<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>ç®¡ç†å“¡è¼¸å…¥æ¸¬è³‡</title>
</head>
<body>
<h1>è¼¸å…¥åƒèˆ‡è€…è³‡æ–™</h1>

<p>Code: <input type="text" id="code"></p>
<p>Owner Name: <input type="text" id="ownerName"></p>
<p>Info: <input type="text" id="info"></p>
<button id="submitBtn">é€å‡º</button>
<p id="msg"></p>

<p><a href="index.html">å›åˆ°æŠ½ç±¤é é¢</a></p>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

// ğŸ”¹ Firebase è¨­å®š
const firebaseConfig = {
  apiKey: "AIzaSyALq77Yraym29l8OX2YCLBIBcBve4jo8Dc",
  authDomain: "christmas-draw-c07d6.firebaseapp.com",
  projectId: "christmas-draw-c07d6",
  storageBucket: "christmas-draw-c07d6.firebasestorage.app",
  messagingSenderId: "150938406696",
  appId: "1:150938406696:web:ea9733014831f50029ca1d"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const submitBtn = document.getElementById("submitBtn");
submitBtn.addEventListener("click", async () => {
  const code = document.getElementById("code").value.trim();
  const ownerName = document.getElementById("ownerName").value.trim();
  const info = document.getElementById("info").value.trim();

  if(!code || !ownerName || !info){
    document.getElementById("msg").textContent = "è«‹å¡«å¯«æ‰€æœ‰æ¬„ä½";
    return;
  }

  try {
    await addDoc(collection(db, "participants"), {
      code: code,
      ownerName: ownerName,
      info: info,
      drawn: false
    });
    document.getElementById("msg").textContent = "æ–°å¢æˆåŠŸï¼";
    document.getElementById("code").value = "";
    document.getElementById("ownerName").value = "";
    document.getElementById("info").value = "";
  } catch(e) {
    console.error(e);
    document.getElementById("msg").textContent = "ç™¼ç”ŸéŒ¯èª¤";
  }
});
</script>
</body>
</html>
