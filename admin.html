<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>ç®¡ç†å“¡è¼¸å…¥æ¸¬è³‡</title>
</head>
<body>

<h1>è¼¸å…¥åƒèˆ‡è€…è³‡æ–™</h1>

<p>Code: <input type="text" id="codeInput"></p>
<p>Owner Name: <input type="text" id="ownerNameInput"></p>
<p>Info: <input type="text" id="infoInput"></p>

<button id="submitBtn">é€å‡º</button>
<p id="msg"></p>

<p><a href="index.html">å›åˆ°æŠ½ç±¤é é¢</a></p>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

// ğŸ”¹ Firebase è¨­å®šï¼ˆä½ çš„å°ˆæ¡ˆï¼‰
const firebaseConfig = {
  apiKey: "AIzaSyALq77Yraym29l8OX2YCLBIBcBve4jo8Dc",
  authDomain: "christmas-draw-c07d6.firebaseapp.com",
  projectId: "christmas-draw-c07d6",
  storageBucket: "christmas-draw-c07d6.firebasestorage.app",
  messagingSenderId: "150938406696",
  appId: "1:150938406696:web:ea9733014831f50029ca1d"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// âœ… æ­£ç¢ºæŠ“ DOM
const codeInput = document.getElementById("codeInput");
const ownerNameInput = document.getElementById("ownerNameInput");
const infoInput = document.getElementById("infoInput");
const msg = document.getElementById("msg");

document.getElementById("submitBtn").onclick = async () => {
  const code = codeInput.value.trim();
  const ownerName = ownerNameInput.value.trim();
  const info = infoInput.value.trim();

  if (!code || !ownerName || !info) {
    msg.textContent = "è«‹å¡«å¯«æ‰€æœ‰æ¬„ä½";
    return;
  }

  try {
    await addDoc(collection(db, "participants"), {
      code,
      ownerName,
      info,
      drawn: false,
      hasDrawn: false
    });

    msg.textContent = "æ–°å¢æˆåŠŸï¼";
    codeInput.value = "";
    ownerNameInput.value = "";
    infoInput.value = "";
  } catch (e) {
    console.error(e);
    msg.textContent = "ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹æŸ¥çœ‹ Console";
  }
};
</script>

</body>
</html>
